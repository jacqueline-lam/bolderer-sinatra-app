<!-- interpolate Ruby code using ERB tags -->
<!-- evaluate Ruby code and compile into HTML code before it gets sent to browser -->
<h1>Welcome, @<%= @user.username %>!</h1>

<!-- Link to create session -->
<h4><a href="/problems/new">Create a new problem</a></h4>

<!-- Extra features -->
<h3>This Month's Leaderboard</h3>
<h4>Redpoint Winners</h4>
<i>Who climbed the most problems this month?</i>
<% @users_and_problem_count[0..4].each do |user, count| %>
  <p>@<%= user.username %> - <%= count %></p>
<% end %>

<h4>Crusher of The Month</h4>
<i>Who climbed the hardest grade this month?</i>
<button class="button" type="button" data-hover="CLICK ME" data-active=""><span>WINNER</span></button>


<!-- Display all sessions -->
<h3>All problem logs:</h3>
<% if @problems.empty? %>
  <p>There are no existing problems!</p>
<% else %>

  <table class="table table-bordered table-striped table-hover">
    <thead class="thead-dark">
      <th>Username</th>
      <th>Date</th>
      <th>Color</th>
      <th>Grade</th>
      <th></th>
      <th></th>
      <th></th>
    </thead>
    <tbody>
      <% @problems.each do |problem| %>
        <tr>
          <td><a href="/users/<%= problem.user_id %>">@<%= problem.user.username %></a></td>
          <td><%= problem.date %></td>
          <td><%= problem.color %></td>
          <td><%= problem.grade %></td>
          <form action="/problems/<%= problem.id %>" method="get">
            <td><button class="btn btn-info" type="submit">See Details</button></td>
          </form>

          <% if problem.user == current_user %>
            <form action="/problems/<%= problem.id %>/edit" method="GET">
               <td>
                <button class="btn btn-primary btn-sm" type="submit">Edit Problem</button>
              </td>
            </form>

            <form action="/problems/<%= problem.id %>/delete" method="POST">
              <input id="hidden" type="hidden" name="_method" value="DELETE">
              <td>
                <button type="submit" class="btn btn-sm btn-danger">Delete Problem</button>
              </td>
            </form>
          <% else %>
            <td></td>
            <td></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
