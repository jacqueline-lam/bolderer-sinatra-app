<!-- interpolate Ruby code using ERB tags -->
<!-- evaluate Ruby code and compile into HTML code before it gets sent to browser -->
<h1>Welcome, <%= @user.username %></h1>
<h2>Problems</h2>

<!-- Link to create session -->
<a href="/problems/new">Create a new problem</a>

<!-- Extra feature -->
<!-- <h3>This Month's Leaderboard</h3> -->
<!-- <h4><i>Which user sent the most problems this month?</i><h4> -->
  <!-- Display chart -->
<!-- <h4><i>Which user sent the hardest grade this month?</i><h4> -->
  <!-- Display chart -->

<!-- Display all sessions -->
<h3>All problem logs:</h3>
<% if @problems.empty? %>
  <p>There are no existing problems!</p>
<% else %>

  <table class="table table-bordered table-striped table-hover">
    <thead>
      <th>Username</th>
      <th>Date</th>
      <th>Color</th>
      <th>Grade</th>
      <th></th>
      <th></th>
    </thead>
    <tbody>
      <% @problems.each do |problem| %>
        <tr>
          <td><%= problem.user.username %></td>
          <td><%= problem.date %></td>
          <td><%= problem.color %></td>
          <td><%= problem.grade %></td>
          <% if problem.user == current_user %>
            <form action="/problems/<%= problem.id %>/edit" method="GET">
               <td>
                <button class="btn btn-primary btn-sm" type="submit">Edit Problem</button>
              </td>
            </form>

            <form action="/problems/<%= problem.id %>/delete" method="POST">
              <input id="hidden" type="hidden" name="_method" value="DELETE">
              <td>
                <button type="submit" class="btn btn-sm btn-danger">Delete Problem</button>
              </td>
            </form>
          <% else %>
            <td></td>
            <td></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <% @problems.each do |problem| %>
    <ul>
      <li>
        <%= @user.username %>: <a href="/problems/<%= problem.id %>"><%= problem.date %> â€” <%= problem.color %> <%= problem.grade %></a>
        <!-- If currently logged_in user created this problem -->
        <% if problem.user == current_user %>
          <!-- Edit problem button -->
          <form action="/problems/<%= problem.id %>/edit" method="GET">
             <button type="submit">Edit Problem</button>
          </form>
          <!-- Delete problem button -->
          <form action="/problems/<%= problem.id %>/delete" method="POST">
            <input id="hidden" type="hidden" name="_method" value="DELETE">
            <input type="submit" value="Delete Problem">
          </form>
        <% end %>
      </li>
    </ul>
  <% end %>
<% end %>
